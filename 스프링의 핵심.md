## Spring

- Spring 1.0 버전은 2004년 3월 출시
- 자바 앤터프라이즈 애플리케이션 개발의 1위
- 스프링 프레임워크의 구성은 20여가지로 구성
- 위의 모듈들은 스프링의 핵심 기능(DI, AOP 등)을 제공해주며, 필요한 모듈만을 선택하여 사용가능
- 여러 모듈이 있지만, 그중에서도 **스프링부트**, **스프링클라우드**, **스프링데이터**, **스프링배치**, **스프링시큐리티**에 중점
- Spring의 과제는 "테스트의 용이성", "느슨한 결합" 에 중점을 두고 개발
- 2000년대 초의 자바 EE 애플리케이션은 작성/테스트가 매우 어려웠으며 한번 테스트하기가 번거로웠음
- 다른 프레임워크와 스프링의 가장 큰 차이점이, 스프링은 IoC를 통한 개발 진행

 ## IoC (Inversion of Control)

- 스프링에서는 일반적인 Java 객체를 new로 생성하여 개발자가 관리하는 것이 아닌, Spring Container에게 모두 맡긴다.  
- 즉 개발자 -> 프레임워크로 객체관리의 제어 권한이 넘어갔으므로, "제어의 역전" 이라고 하는 것
- **내가 객체를 관리하는 것이 아니라, 스프링 컨테이너에서 객체 관리를 해주는!**

> 그렇다면, 내가 필요한 객체를 어떻게 사용할 수 있는 것임?

> **외부로부터 주입(Injection)을 받아 사용**한다!



## DI(Dependency Injection)

- **외부로부터 내가 사용할 객체를 주입받는 것**

- 의존성으로부터 격리시켜 코드 테스트에 용이하다
  - 굳이 꼭 이 객체가 없어도 다른 간단한 객체로 테스트가 가능!
- DI를 통하여, 불가능한 상황을 Mock과 같은 기술을 통하여, 안정적으로 테스트가 가능하다.
  - 예전에는 외부와의 통신이 필요한 경우, 이 메서드를 테스트할 수 없었음
  - 왜냐, 컨테이너에 올라가야지만 외부와 통신할 수 있기 때문
  - 실질적으로 배포하지 않으면 테스트가 불가능했었다
  - 그러나 DI, Mocking등으로 클라이언트를 모킹해서(클라이언트의 요청을 목객체화) 이것을 주입하여 테스트!
  - 코드를 확장하거나 변경할 때 영향을 최소화한다 (추상화)
- 순환 참조를 막을 수 있다

## AOP(Aspect Oriented Programming)

- 관점 지향 프로그램
- 대부분의 스프링 애플리케이션은 MVC 웹 애플리케이션
- MVC 웹 애플리케이셔은 Web Layer, Business Layer, DataLayer로 정의

- 가장 앞단의 **Web Layer**: Rest API를 제공하며, Client 중심의 로직 적용
- **Business Layer**: 내부 정책에 따른 logic을 개발하며, 주로 해당 부분을 개발
- **Data Layer**: 데이터베이스 및 외부와의 연동을 처리
- 반복되는 코드들(메서드 실행시간 로그 등) 한곳에서 몰아서 코딩할 수 있게 해줌

- **더이상 controller에서 System.out.println으로 찍어보는 것이 아닌, aop를 통해 로그를 찍어확인하자!**

### 주요 AOP 어노테이션

| Annotaion       | 의미                                                         |
| --------------- | ------------------------------------------------------------ |
| @Aspect         | 자바에서 널리 사용하는 AOP 프레임워크에 포함되며, AOP를 정의하는 클래스에 할당 |
| @Pointcut       | 기능을 어디에 적용시킬지, 메소드? Annotaion? 등 AOP를 적용시킬 지점을 지정 |
| @Before         | 메소드를 실행하기 이전                                       |
| @After          | 메소드가 성공적으로 실행 후, 예외가 발생되더라도 실행        |
| @AfterReturning | 메소드 호출 성공 실행시(Not Throws)                          |
| @AfterThrowing  | 메소드 호출 실패 예외 발생 (Throws)                          |
| @Around         | Before/after 모두 제어                                       |



